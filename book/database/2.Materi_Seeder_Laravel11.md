# Materi Seeder Laravel 11

## Table of Contents
- [Apa Itu Seeder?](#apa-itu-seeder)
- [Membuat Seeder Baru](#membuat-seeder-baru)
- [Bonus untuk Melengkapi](#bonus-untuk-melengkapi)
- [Menjalankan Seeder](#menjalankan-seeder)
- [Mengatasi Error Seeder](#mengatasi-error-seeder)
- [Rumusan Singkat](#rumusan-singkat)

---

## Apa Itu Seeder? <span style="float:right;">10/09/2025</span>

Seeder adalah sebuah skema atau dummy dalam proses memasukkan data ke dalam tabel yang ada pada database.  
Mudahnya, seed ini diibaratkan seperti sebuah kue yang nanti akan dibawa oleh kasir ke dalam etalase tempat menyimpan data.

Jadi alurnya seperti ini 👇

---

## Membuat Seeder Baru

1. Bash akan membuat dummy sample tempat kamu menyediakan data dan kamu harus pastikan tabel mana yang akan kamu isi datanya.  
  Misal di sini menggunakan tabel **Siswas** yang berisi beberapa data:
  - nama lengkap
  - jenis kelamin
  - tanggal lahir
  - kelas

  Cara untuk membuat sample ini adalah dengan mengetikkan pada CMD:

  ```bash
  php artisan make:seeder [NamaSeeder]TableSeeder
  ```

  Lalu tekan enter.  
  Coba cek pada folder **seeder** 📁 yang berada di dalam folder **database** 📁, di sana ada file baru yang biasanya bertuliskan `NamaTableSeeder.php` 📄.  
  Buka file tersebut, isinya akan seperti ini 👇

  ```php
  <?php

  namespace Database\Seeders;

  use Illuminate\Database\Console\Seeds\WithoutModelEvents;
  use Illuminate\Database\Seeder;
  use Illuminate\Support\Facades\DB;

  class SiswastableSeeder extends Seeder
  {
     /**
      * Run the database seeds.
      */
     public function run(): void
     {
        //isi
     }
  }
  ```

---

## Bonus untuk Melengkapi

Pada bagian ini sebenarnya ada yang tidak lengkap yaitu sebuah fungsi pada database seperti **insert**, **delete**, dan lain-lain. Maka dari itu perlu ditambahkan sebuah penhubung, yaitu ini 👇

```php
use Illuminate\Support\Facades\DB;
```

Baris ini ditambahkan di bawah baris:

```php
use Illuminate\Database\Seeder;
```

atau sebelum:

```php
class NamaTableSeeder extends Seeder
```

2. Jika kamu perhatikan di dalam file itu ada sebuah class dengan function di dalamnya.  
  Nah, kemudian function ini bisa kita pakai untuk menyimpan atau menyediakan data untuk disimpan di database sebagai record atau isi dari field di bagian ini 👇

  ```php
  public function run(): void
  {
     //isi
  }
  ```

  Di dalamnya, tepatnya di bagian `//isi`, bisa dituliskan sintaks ini 👇

  ```php
  DB::table('Siswas')->insert([
     //isi record kamu di sini kamu bisa menuliskan nya dengan rumus
     // 'nama_field' => 'isi record',
     // misalkan
     'nama_lengkap' => 'Kina SaQina',
     'jenis_kelamin' => 'perempuan',
     'tanggal_lahir' => '2009-06-12',
     'kelas' => 'XI RPL 1',
  ]);
  ```

  Jika sudah, maka kamu sudah berhasil membuat sample data dummy untuk disimpan di database sebagai record.  
  Tapi ada 1 hal terakhir sebelum penyesuaian.

---

## Menjalankan Seeder

3. Menjalankan Seeder. Untuk menjalankan seeder ada yang namanya sebuah pintu masuk yang digunakan untuk menjalankan seeder, yang di mana seeder ini akan dijalankan pada file `DatabaseSeeder.php` 📄.  
  File ini ada di folder yang sama dengan kamu menyimpan file seeder lain, biasanya ada di paling atas.  
  Coba kamu buka, ketika dibuka tampilannya akan seperti ini:

  ```php
  <?php

  namespace Database\Seeders;

  use App\Models\User;
  // use Illuminate\Database\Console\Seeds\WithoutModelEvents;
  use Illuminate\Database\Seeder;

  class DatabaseSeeder extends Seeder
  {
     /**
      * Seed the application's database.
      */
     public function run(): void
     {
        // User::factory(10)->create();

        User::factory()->create([
          'name' => 'Test User',
          'email' => 'test@example.com',
        ]);  
     }
  }
  ```

  Jika kamu ingin seeder yang sudah kamu buat masuk ke dalam database, kamu perlu melakukan konfigurasi tambahan pada file ini.  
  Coba kamu lihat di atas, di dalam `public function run():` di sana ada sebuah model yang didefinisikan sebagai user factory yaitu:

  ```php
  User::factory()->create([])
  ```

  Ini biasanya ada di `database/factories/UserFactory.php`.  
  Nanti bisa kamu cek sendiri. Untuk kali ini kita fokus menambah konfigurasi pada seeder yang kamu buat.  
  Tambahkan baris baru di dalam function tadi dan di bawah user tadi buatkan 👇

  ```php
  $this->call([
    //di bagian ini kamu bisa masukin rumus dan nama seeder sesuai yang ingin kamu jalan kan
    //rumus nya 👇
    //  NamaTableSeeder::class, 
    //contoh Xample
    PostsTableSeeder::class, //ini seeder posts
    SiswastableSeeder::class, //isi seeder Siswas
  ]);
  ```

4. Jika kamu sudah membuat seeder, mengisi seeder, melakukan konfigurasi pada DatabaseSeeder, langkah selanjutnya adalah menjalankan seeder pada Bash, Git, atau CMD.  
  Jika menggunakan CMD, ketik `ctrl + ``  
  Kamu bisa menuliskan beberapa perintah sesuai yang kamu mau:

  - **Jalankan semua seeder yang ada di `$this->call`:**
    ```bash
    php artisan db:seed
    ```
  - **Jalankan seeder tertentu:**
    ```bash
    php artisan db:seed --class=NamaTableSeeder
    ```

---

## Mengatasi Error Seeder

Jika kamu menemukan error ketika menjalankan seeder jangan khawatir.  
Misal errornya adalah:

```
INFO  Seeding database.  
Illuminate\Database\UniqueConstraintViolationException 
SQLSTATE[23000]: Integrity constraint violation: 19 UNIQUE constraint failed: users.email (Connection: sqlite, SQL: insert into "users" ("name", "email", "email_verified_at", "password", "remember_token", "updated_at", "created_at") values (Test User, test@example.com, 2025-09-11 00:45:23, $2y$12$isPUNItMeLgE5i1/hcuj7OW9fpZj4kebZY.YM47JcroeJnusamKBG, 3uwkwIeZ5L, 2025-09-11 00:45:26, 2025-09-11 00:45:26))
at vendor\laravel\framework\src\Illuminate\Database\Connection.php:819
1   vendor\laravel\framework\src\Illuminate\Database\Connection.php:570
   PDOException::("SQLSTATE[23000]: Integrity constraint violation: 19 UNIQUE constraint failed: users.email")
2   vendor\laravel\framework\src\Illuminate\Database\Connection.php:570
   PDOStatement::execute()
```

Itu artinya database kamu sudah punya data yang kamu tulis di dalamnya di database.  
Nah, kita bisa akali jika kamu ingin data dummy-nya ingin tetap sama seperti pada file seed kamu, kamu bisa ketikkan ini di Bash:

```bash
php artisan migrate:fresh --seed
```

Kode ini artinya dia akan mengulangi kembali isi seed ke posisi default atau kosong.  
Nah, kita sudah ubah posisi tabel ke kosong, sekarang kita bisa isi data dummy pada file seed kita ke dalamnya.  
Ketikkan lagi:

```bash
php artisan db:seed
```

Jika sukses, kamu bisa cek di database apakah data tersebut telah masuk sebagai record pada tabel.  
Jika sudah maka kamu telah selesai membuat data dummy tersebut.  
Jika terjadi error yang berbeda dengan di atas, kamu bisa cek beberapa file yang kamu konfigurasi, mungkin di sana terjadi typo atau kurangnya kata yang tidak sesuai, kamu bisa cek kembali.

---

## Rumusan Singkat

### 1. Membuat Seeder

Jalankan perintah:
```bash
php artisan make:seeder NamaSeeder
```

Contoh:
```bash
php artisan make:seeder UserSeeder
```

Seeder akan muncul di:
```
database/seeders/UserSeeder.php
```

### 2. Mengisi Seeder dengan Data

Edit file `UserSeeder.php`:

```php
<?php

namespace Database\Seeders;

use Illuminate\Database\Seeder;
use Illuminate\Support\Facades\DB;
use Illuminate\Support\Facades\Hash;

class UserSeeder extends Seeder
{
   public function run(): void
   {
      DB::table('users')->insert([
        'name' => 'Admin',
        'email' => 'admin@example.com',
        'password' => Hash::make('password'),
      ]);
   }
}
```

### 3. Menjalankan Seeder

**A. Menjalankan Seeder Langsung:**
```bash
php artisan db:seed --class=UserSeeder
```

**B. Menambahkan ke DatabaseSeeder**

Buka file `database/seeders/DatabaseSeeder.php`:

```php
public function run(): void
{
   $this->call(UserSeeder::class);
}
```

Jalankan:
```bash
php artisan db:seed
```

### 4. Menggunakan Factory (Opsional, untuk Data Dummy Banyak)

Buat factory:
```bash
php artisan make:factory UserFactory
```

Di file `database/factories/UserFactory.php`:

```php
public function definition(): array
{
   return [
      'name' => fake()->name(),
      'email' => fake()->unique()->safeEmail(),
      'password' => bcrypt('password'),
   ];
}
```

Gunakan factory di `UserSeeder.php`:

```php
use App\Models\User;

User::factory()->count(10)->create();
```

Jalankan lagi:
```bash
php artisan db:seed --class=UserSeeder
```

### 5. Mengecek Data di Database

Setelah seeder dijalankan, cek tabel users di database:

```sql
SELECT * FROM users;
```

---

### Ringkasan Cepat

1. **Buat seeder** → `php artisan make:seeder NamaSeeder`
2. **Tambah data di file seeder**
3. **Jalankan** → `php artisan db:seed --class=NamaSeeder` atau panggil di DatabaseSeeder
4. **(Opsional) Gunakan factory untuk data dummy banyak**
5. **Cek data di database**

